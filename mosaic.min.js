/*! Mosaic | Copyright (c) 2015 James Liu | Released under the MIT license */
;(function(d){d.Mosaic=function(c,d){"string"===typeof c&&(c=document.getElementById(c));var p=d||10,m=new Image;m.src=c.src;m.onload=function(){var b=document.createElement("canvas"),d=b.getContext("2d");b.width=c.offsetWidth;b.height=c.offsetHeight;d.drawImage(c,0,0,b.width,b.height);d.putImageData(function(c,a){for(var b=c.data,d=c.width,m=c.height,n=0,p=d/a|0,l,q,k,e,f,g,h;n<p;n++)for(l=0,q=m/a|0;l<q;l++){k=[];e=[0,0,0];for(f=0;f<a;f++)for(h=0;h<a;h++)g=(l*a+f)*d+n*a+h,e[0]+=b[4*g],e[1]+=b[4*g+
1],e[2]+=b[4*g+2];k[0]=e[0]/(a*a);k[1]=e[1]/(a*a);k[2]=e[2]/(a*a);for(f=0;f<a;f++)for(h=0;h<a;h++)g=(l*a+f)*d+n*a+h,b[4*g]=k[0],b[4*g+1]=k[1],b[4*g+2]=k[2]}return c}(d.getImageData(0,0,b.width,b.height),p),0,0);c.src=b.toDataURL()}}})(window);